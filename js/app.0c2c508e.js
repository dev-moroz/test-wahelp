(function(){"use strict";var e={8062:function(e,t,s){var o=s(9242),n=s(3396),r=s(7139);const a={class:"pages"};function i(e,t,s,o,i,c){const u=(0,n.up)("MenuComponent"),m=(0,n.up)("PostsPage"),d=(0,n.up)("UsersPage");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{modelValue:e.menu,"onUpdate:modelValue":t[0]||(t[0]=t=>e.menu=t)},null,8,["modelValue"]),(0,n._)("div",a,[(0,n.Wm)(m,{class:(0,r.C_)({hideMenu:!c.isPostsSelected})},null,8,["class"]),(0,n.Wm)(d,{class:(0,r.C_)({hideMenu:c.isPostsSelected})},null,8,["class"])])],64)}const c={class:"menu"},u={class:"menu__tabs"};function m(e,t,s,o,a,i){return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",u,[(0,n._)("button",{class:(0,r.C_)(["menu__tabs__item",{active:i.isPostsSelected}]),onClick:t[0]||(t[0]=t=>e.setMenu("posts"))}," Posts ",2),(0,n._)("button",{class:(0,r.C_)(["menu__tabs__item",{active:!i.isPostsSelected}]),onClick:t[1]||(t[1]=t=>e.setMenu("users"))}," Users ",2)])])}var d=s(65),l={name:"MenuComponent",props:{modelValue:{type:String}},computed:{...(0,d.Se)(["menu"]),isPostsSelected(){return"posts"===this.menu}},methods:{...(0,d.nv)(["setMenu"])}},p=s(89);const h=(0,p.Z)(l,[["render",m],["__scopeId","data-v-70cdb922"]]);var w=h;const _={ref:"posts"},f={key:0,class:"filter"},v={key:1};function g(e,t,s,o,a,i){const c=(0,n.up)("PostComponent");return(0,n.wg)(),(0,n.iD)("div",_,[e.sortedByUser.length?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("p",null,"Посты пользователя "+(0,r.zw)(e.selectedUser),1),(0,n._)("button",{onClick:t[0]||(t[0]=(...t)=>e.cleanFilter&&e.cleanFilter(...t))},"X")])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.localPosts,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e.id,post:e},null,8,["post"])))),128)),a.isLoadData?((0,n.wg)(),(0,n.iD)("p",v)):(0,n.kq)("",!0)],512)}const C=e=>((0,n.dD)("data-v-6ec2e309"),e=e(),(0,n.Cn)(),e),y={class:"post"},D={class:"post__user"},P={class:"post__comments"},U={key:0,class:"post__comments__new"},b=C((()=>(0,n._)("span",null,"new comment: ",-1))),k=C((()=>(0,n._)("input",{type:"submit",value:"send",class:"post__comments__send"},null,-1)));function S(e,t,s,a,i,c){return(0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("h2",null,(0,r.zw)(s.post.title),1),(0,n._)("p",null,(0,r.zw)(s.post.body),1),(0,n._)("p",D,(0,r.zw)(s.post.user),1),(0,n._)("div",P,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.post.comments,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[(0,n._)("p",null,(0,r.zw)(t+1)+") "+(0,r.zw)(e),1)])))),128)),i.isShowNewComment?((0,n.wg)(),(0,n.iD)("div",U,[b,(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>c.sendComment&&c.sendComment(...e)),["prevent"]))},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.newComment=e),class:"post__comments__folder"},null,512),[[o.nr,i.newComment]]),k,(0,n._)("button",{class:"post__comments__close",onClick:t[1]||(t[1]=(...e)=>c.showComment&&c.showComment(...e))},"x")],32)])):(0,n.kq)("",!0),i.isShowNewComment?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"post__comments__add",onClick:t[3]||(t[3]=(...e)=>c.showComment&&c.showComment(...e))},"new comment +"))])])}var M={name:"PostComponent",data(){return{isShowNewComment:!1,newComment:""}},props:{post:{type:Object,require:!0}},methods:{...(0,d.nv)(["addNewComment"]),showComment(){this.isShowNewComment=!this.isShowNewComment,this.newComment=""},sendComment(){this.addNewComment({id:this.post.id,comment:this.newComment}),this.showComment()}}};const B=(0,p.Z)(M,[["render",S],["__scopeId","data-v-6ec2e309"]]);var O=B,j={name:"PostsPage",data(){return{showedPosts:[],slice:20,isLoadData:!1}},components:{PostComponent:O},watch:{isLoadData:{handler(e){e&&setTimeout((()=>this.setPartData()),200)}}},methods:{...(0,d.nv)(["loadData","cleanFilter"]),setPartData(){this.showedPosts=this.posts.slice(0,this.slice),this.isLoadData=!1,this.slice+=20},addPosts(){const e=window.scrollY,t=document.body.offsetHeight,s=window.innerHeight,o=t-s-50;e>o&&(this.isLoadData=!0)}},computed:{...(0,d.Se)(["posts","sortedByUser","selectedUser"]),localPosts(){return this.sortedByUser.length?this.sortedByUser:this.showedPosts}},async created(){await this.loadData(),this.posts.length&&this.setPartData(),window.addEventListener("scroll",(()=>this.addPosts()))}};const N=(0,p.Z)(j,[["render",g],["__scopeId","data-v-5675542f"]]);var I=N;const x={class:"users"},z=["onClick"];function H(e,t,s,o,a,i){return(0,n.wg)(),(0,n.iD)("div",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"users__item"},[(0,n._)("p",null,(0,r.zw)(e.name),1),(0,n._)("button",{class:"users__item__btn",onClick:t=>i.showPosts(e.id)}," Посмотреть посты пользователя",8,z)])))),128))])}var L={name:"UsersPage",computed:{...(0,d.Se)(["users"])},methods:{...(0,d.nv)(["sortedByUser","setMenu"]),showPosts(e){console.log("userId",e),this.sortedByUser(e),this.setMenu("posts")}}};const q=(0,p.Z)(L,[["render",H],["__scopeId","data-v-005cc631"]]);var F=q,V={name:"App",components:{MenuComponent:w,PostsPage:I,UsersPage:F},data(){return{}},computed:{...(0,d.Se)(["menu"]),isPostsSelected(){return"posts"===this.menu}}};const Y=(0,p.Z)(V,[["render",i]]);var Z=Y,T=(s(560),(0,d.MT)({state:{posts:[],users:[],comments:[],sortedByUser:[],selectedUser:"",menu:"users"},getters:{posts:e=>e.posts,users:e=>e.users,comments:e=>e.comments,sortedByUser:e=>e.sortedByUser,selectedUser:e=>e.selectedUser,menu:e=>e.menu},mutations:{getData(e,{path:t,data:s}){e[t]=s},loadData(e){e.posts=e.posts.map((t=>{const s=e.users.find((e=>e.id===t.userId)),o=e.comments.filter((e=>e.postId===t.id)).map((e=>e.body));return t.user=s.name,t.comments=o,t}))},sortedByUser(e,t){if(!t)return e.sortedByUser=[];e.sortedByUser=e.posts.filter((e=>e.userId===t))},selectedUser(e,t){if(!t)return e.selectedUser="";e.selectedUser=e.users.find((e=>e.id===t)).name},setMenu(e,t){e.menu=t},addNewComment(e,t){e.posts[t.id-1].comments.push(t.comment)}},actions:{async getData({commit:e},t){try{const s=await fetch(`https://jsonplaceholder.typicode.com/${t}`),o=await s.json();return e("getData",{path:t,data:o}),!0}catch(s){console.error("error",s)}},async loadData({commit:e,dispatch:t}){await t("getData","posts"),await t("getData","comments"),await t("getData","users"),e("loadData")},sortedByUser({commit:e},t){e("sortedByUser",t),e("selectedUser",t)},cleanFilter({commit:e}){e("sortedByUser"),e("selectedUser")},setMenu({commit:e},t){e("setMenu",t)},addNewComment({commit:e},t){e("addNewComment",t)}}}));(0,o.ri)(Z).use(T).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,r){if(!o){var a=1/0;for(m=0;m<e.length;m++){o=e[m][0],n=e[m][1],r=e[m][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||a>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(m--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[o,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,a=o[0],i=o[1],c=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var m=c(s)}for(t&&t(o);u<a.length;u++)r=a[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(m)},o=self["webpackChunktest_wahelp"]=self["webpackChunktest_wahelp"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(8062)}));o=s.O(o)})();
//# sourceMappingURL=app.0c2c508e.js.map